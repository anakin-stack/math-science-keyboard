{"ast":null,"code":"\"use strict\";\n\nconst {\n  isValidTargetOrigin\n} = require(\"../utils\");\nconst DOMException = require(\"domexception\");\nmodule.exports = function (message, targetOrigin) {\n  if (arguments.length < 2) {\n    throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n  }\n  targetOrigin = String(targetOrigin);\n  if (!isValidTargetOrigin(targetOrigin)) {\n    throw new DOMException(\"Failed to execute 'postMessage' on 'Window': \" + \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\");\n  }\n\n  // TODO: targetOrigin === '/' - requires reference to source window\n  // See https://github.com/tmpvar/jsdom/pull/1140#issuecomment-111587499\n  if (targetOrigin !== \"*\" && targetOrigin !== this.location.origin) {\n    return;\n  }\n\n  // TODO: event.source - requires reference to source window\n  // TODO: event.origin - requires reference to source window\n  // TODO: event.ports\n  // TODO: event.data - structured clone message - requires cloning DOM nodes\n  const event = new this.MessageEvent(\"message\", {\n    data: message\n  });\n  event.initEvent(\"message\", false, false);\n  setTimeout(() => {\n    this.dispatchEvent(event);\n  }, 0);\n};","map":{"version":3,"names":["isValidTargetOrigin","require","DOMException","module","exports","message","targetOrigin","arguments","length","TypeError","String","location","origin","event","MessageEvent","data","initEvent","setTimeout","dispatchEvent"],"sources":["G:/scientificKeyboard/keyboard/node_modules/mathjax-node/node_modules/jsdom/lib/jsdom/living/post-message.js"],"sourcesContent":["\"use strict\";\nconst { isValidTargetOrigin } = require(\"../utils\");\nconst DOMException = require(\"domexception\");\n\nmodule.exports = function (message, targetOrigin) {\n  if (arguments.length < 2) {\n    throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n  }\n\n  targetOrigin = String(targetOrigin);\n\n  if (!isValidTargetOrigin(targetOrigin)) {\n    throw new DOMException(\"Failed to execute 'postMessage' on 'Window': \" +\n      \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\");\n  }\n\n  // TODO: targetOrigin === '/' - requires reference to source window\n  // See https://github.com/tmpvar/jsdom/pull/1140#issuecomment-111587499\n  if (targetOrigin !== \"*\" && targetOrigin !== this.location.origin) {\n    return;\n  }\n\n  // TODO: event.source - requires reference to source window\n  // TODO: event.origin - requires reference to source window\n  // TODO: event.ports\n  // TODO: event.data - structured clone message - requires cloning DOM nodes\n  const event = new this.MessageEvent(\"message\", {\n    data: message\n  });\n\n  event.initEvent(\"message\", false, false);\n\n  setTimeout(() => {\n    this.dispatchEvent(event);\n  }, 0);\n};\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAoB,CAAC,GAAGC,OAAO,CAAC,UAAU,CAAC;AACnD,MAAMC,YAAY,GAAGD,OAAO,CAAC,cAAc,CAAC;AAE5CE,MAAM,CAACC,OAAO,GAAG,UAAUC,OAAO,EAAEC,YAAY,EAAE;EAChD,IAAIC,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;IACxB,MAAM,IAAIC,SAAS,CAAC,kEAAkE,CAAC;EACzF;EAEAH,YAAY,GAAGI,MAAM,CAACJ,YAAY,CAAC;EAEnC,IAAI,CAACN,mBAAmB,CAACM,YAAY,CAAC,EAAE;IACtC,MAAM,IAAIJ,YAAY,CAAC,+CAA+C,GACpE,yBAAyB,GAAGI,YAAY,GAAG,+BAA+B,EAAE,aAAa,CAAC;EAC9F;;EAEA;EACA;EACA,IAAIA,YAAY,KAAK,GAAG,IAAIA,YAAY,KAAK,IAAI,CAACK,QAAQ,CAACC,MAAM,EAAE;IACjE;EACF;;EAEA;EACA;EACA;EACA;EACA,MAAMC,KAAK,GAAG,IAAI,IAAI,CAACC,YAAY,CAAC,SAAS,EAAE;IAC7CC,IAAI,EAAEV;EACR,CAAC,CAAC;EAEFQ,KAAK,CAACG,SAAS,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC;EAExCC,UAAU,CAAC,MAAM;IACf,IAAI,CAACC,aAAa,CAACL,KAAK,CAAC;EAC3B,CAAC,EAAE,CAAC,CAAC;AACP,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}