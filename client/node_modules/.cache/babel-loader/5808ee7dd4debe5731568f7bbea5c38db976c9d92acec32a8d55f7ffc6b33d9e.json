{"ast":null,"code":"\"use strict\";\n\nconst {\n  mixin\n} = require(\"../../utils\");\nconst NodeImpl = require(\"./Node-impl\").implementation;\nconst ChildNodeImpl = require(\"./ChildNode-impl\").implementation;\nconst NonDocumentTypeChildNodeImpl = require(\"./NonDocumentTypeChildNode-impl\").implementation;\nconst DOMException = require(\"domexception\");\nconst {\n  TEXT_NODE\n} = require(\"../node-type\");\nclass CharacterDataImpl extends NodeImpl {\n  constructor(args, privateData) {\n    super(args, privateData);\n    this._data = privateData.data;\n  }\n  get data() {\n    return this._data;\n  }\n  set data(data) {\n    this.replaceData(0, this.length, data);\n  }\n  get length() {\n    return this._data.length;\n  }\n  substringData(offset, count) {\n    const {\n      length\n    } = this;\n    if (offset > length) {\n      throw new DOMException(\"The index is not in the allowed range.\", \"IndexSizeError\");\n    }\n    if (offset + count > length) {\n      return this._data.substring(offset);\n    }\n    return this._data.substring(offset, offset + count);\n  }\n  appendData(data) {\n    this.replaceData(this.length, 0, data);\n  }\n  insertData(offset, data) {\n    this.replaceData(offset, 0, data);\n  }\n  deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  }\n  replaceData(offset, count, data) {\n    const {\n      length\n    } = this;\n    if (offset > length) {\n      throw new DOMException(\"The index is not in the allowed range.\", \"IndexSizeError\");\n    }\n    if (offset + count > length) {\n      count = length - offset;\n    }\n    const start = this._data.substring(0, offset);\n    const end = this._data.substring(offset + count);\n    this._data = start + data + end;\n\n    // TODO: range stuff\n\n    if (this.nodeType === TEXT_NODE && this.parentNode) {\n      this.parentNode._childTextContentChangeSteps();\n    }\n  }\n}\nmixin(CharacterDataImpl.prototype, NonDocumentTypeChildNodeImpl.prototype);\nmixin(CharacterDataImpl.prototype, ChildNodeImpl.prototype);\nmodule.exports = {\n  implementation: CharacterDataImpl\n};","map":{"version":3,"names":["mixin","require","NodeImpl","implementation","ChildNodeImpl","NonDocumentTypeChildNodeImpl","DOMException","TEXT_NODE","CharacterDataImpl","constructor","args","privateData","_data","data","replaceData","length","substringData","offset","count","substring","appendData","insertData","deleteData","start","end","nodeType","parentNode","_childTextContentChangeSteps","prototype","module","exports"],"sources":["G:/scientificKeyboard/keyboard/node_modules/mathjax-node/node_modules/jsdom/lib/jsdom/living/nodes/CharacterData-impl.js"],"sourcesContent":["\"use strict\";\n\nconst { mixin } = require(\"../../utils\");\nconst NodeImpl = require(\"./Node-impl\").implementation;\nconst ChildNodeImpl = require(\"./ChildNode-impl\").implementation;\nconst NonDocumentTypeChildNodeImpl = require(\"./NonDocumentTypeChildNode-impl\").implementation;\nconst DOMException = require(\"domexception\");\nconst { TEXT_NODE } = require(\"../node-type\");\n\nclass CharacterDataImpl extends NodeImpl {\n  constructor(args, privateData) {\n    super(args, privateData);\n\n    this._data = privateData.data;\n  }\n\n  get data() {\n    return this._data;\n  }\n  set data(data) {\n    this.replaceData(0, this.length, data);\n  }\n\n  get length() {\n    return this._data.length;\n  }\n\n  substringData(offset, count) {\n    const { length } = this;\n\n    if (offset > length) {\n      throw new DOMException(\"The index is not in the allowed range.\", \"IndexSizeError\");\n    }\n\n    if (offset + count > length) {\n      return this._data.substring(offset);\n    }\n\n    return this._data.substring(offset, offset + count);\n  }\n\n  appendData(data) {\n    this.replaceData(this.length, 0, data);\n  }\n\n  insertData(offset, data) {\n    this.replaceData(offset, 0, data);\n  }\n\n  deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  }\n\n  replaceData(offset, count, data) {\n    const { length } = this;\n\n    if (offset > length) {\n      throw new DOMException(\"The index is not in the allowed range.\", \"IndexSizeError\");\n    }\n\n    if (offset + count > length) {\n      count = length - offset;\n    }\n\n    const start = this._data.substring(0, offset);\n    const end = this._data.substring(offset + count);\n\n    this._data = start + data + end;\n\n    // TODO: range stuff\n\n    if (this.nodeType === TEXT_NODE && this.parentNode) {\n      this.parentNode._childTextContentChangeSteps();\n    }\n  }\n}\n\nmixin(CharacterDataImpl.prototype, NonDocumentTypeChildNodeImpl.prototype);\nmixin(CharacterDataImpl.prototype, ChildNodeImpl.prototype);\n\nmodule.exports = {\n  implementation: CharacterDataImpl\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}