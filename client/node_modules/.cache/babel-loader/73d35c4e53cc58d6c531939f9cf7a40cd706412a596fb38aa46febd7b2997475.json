{"ast":null,"code":"\"use strict\";\n\nconst nodeType = require(\"../node-type.js\");\nconst FocusEvent = require(\"../generated/FocusEvent.js\");\nconst idlUtils = require(\"../generated/utils.js\");\nconst {\n  isDisabled\n} = require(\"./form-controls.js\");\nconst {\n  HTML_NS\n} = require(\"./namespaces\");\nconst focusableFormElements = new Set([\"input\", \"select\", \"textarea\", \"button\"]);\n\n// https://html.spec.whatwg.org/multipage/interaction.html#focusable-area, but also some of\n// https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps: e.g., Documents are not actually focusable\n// areas, but their viewports are, and the first step of the latter algorithm translates Documents to their viewports.\n// And also https://html.spec.whatwg.org/multipage/interaction.html#specially-focusable!\nexports.isFocusableAreaElement = elImpl => {\n  if (!elImpl._ownerDocument._defaultView && !elImpl._defaultView) {\n    return false;\n  }\n  if (elImpl._nodeType === nodeType.DOCUMENT_NODE) {\n    return true;\n  }\n  if (!Number.isNaN(parseInt(elImpl.getAttribute(\"tabindex\")))) {\n    return true;\n  }\n  if (elImpl._namespaceURI === HTML_NS) {\n    if (elImpl._localName === \"iframe\") {\n      return true;\n    }\n    if (elImpl._localName === \"a\" && elImpl.hasAttribute(\"href\")) {\n      return true;\n    }\n    if (focusableFormElements.has(elImpl._localName) && !isDisabled(elImpl)) {\n      if (elImpl._localName === \"input\" && elImpl.type === \"hidden\") {\n        return false;\n      }\n      return true;\n    }\n  }\n  return false;\n};\n\n// https://html.spec.whatwg.org/multipage/interaction.html#fire-a-focus-event plus the steps of\n// https://html.spec.whatwg.org/multipage/interaction.html#focus-update-steps that adjust Documents to Windows\nexports.fireFocusEventWithTargetAdjustment = (name, target, relatedTarget) => {\n  if (target === null) {\n    // E.g. firing blur with nothing previously focused.\n    return;\n  }\n  const event = FocusEvent.createImpl([name, {\n    bubbles: false,\n    cancelable: false,\n    relatedTarget,\n    view: target._ownerDocument._defaultView,\n    detail: 0\n  }], {\n    isTrusted: true\n  });\n  if (target._defaultView) {\n    target = idlUtils.implForWrapper(target._defaultView);\n  }\n\n  // _dispatch allows setting isTrusted\n  target._dispatch(event);\n};","map":{"version":3,"names":["nodeType","require","FocusEvent","idlUtils","isDisabled","HTML_NS","focusableFormElements","Set","exports","isFocusableAreaElement","elImpl","_ownerDocument","_defaultView","_nodeType","DOCUMENT_NODE","Number","isNaN","parseInt","getAttribute","_namespaceURI","_localName","hasAttribute","has","type","fireFocusEventWithTargetAdjustment","name","target","relatedTarget","event","createImpl","bubbles","cancelable","view","detail","isTrusted","implForWrapper","_dispatch"],"sources":["G:/scientificKeyboard/keyboard/node_modules/mathjax-node/node_modules/jsdom/lib/jsdom/living/helpers/focusing.js"],"sourcesContent":["\"use strict\";\nconst nodeType = require(\"../node-type.js\");\nconst FocusEvent = require(\"../generated/FocusEvent.js\");\nconst idlUtils = require(\"../generated/utils.js\");\nconst { isDisabled } = require(\"./form-controls.js\");\nconst { HTML_NS } = require(\"./namespaces\");\n\nconst focusableFormElements = new Set([\"input\", \"select\", \"textarea\", \"button\"]);\n\n// https://html.spec.whatwg.org/multipage/interaction.html#focusable-area, but also some of\n// https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps: e.g., Documents are not actually focusable\n// areas, but their viewports are, and the first step of the latter algorithm translates Documents to their viewports.\n// And also https://html.spec.whatwg.org/multipage/interaction.html#specially-focusable!\nexports.isFocusableAreaElement = elImpl => {\n  if (!elImpl._ownerDocument._defaultView && !elImpl._defaultView) {\n    return false;\n  }\n\n  if (elImpl._nodeType === nodeType.DOCUMENT_NODE) {\n    return true;\n  }\n\n  if (!Number.isNaN(parseInt(elImpl.getAttribute(\"tabindex\")))) {\n    return true;\n  }\n\n  if (elImpl._namespaceURI === HTML_NS) {\n    if (elImpl._localName === \"iframe\") {\n      return true;\n    }\n\n    if (elImpl._localName === \"a\" && elImpl.hasAttribute(\"href\")) {\n      return true;\n    }\n\n    if (focusableFormElements.has(elImpl._localName) && !isDisabled(elImpl)) {\n      if (elImpl._localName === \"input\" && elImpl.type === \"hidden\") {\n        return false;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n};\n\n// https://html.spec.whatwg.org/multipage/interaction.html#fire-a-focus-event plus the steps of\n// https://html.spec.whatwg.org/multipage/interaction.html#focus-update-steps that adjust Documents to Windows\nexports.fireFocusEventWithTargetAdjustment = (name, target, relatedTarget) => {\n  if (target === null) {\n    // E.g. firing blur with nothing previously focused.\n    return;\n  }\n\n  const event = FocusEvent.createImpl(\n    [\n      name,\n      {\n        bubbles: false,\n        cancelable: false,\n        relatedTarget,\n        view: target._ownerDocument._defaultView,\n        detail: 0\n      }\n    ],\n    {\n      isTrusted: true\n    }\n  );\n\n  if (target._defaultView) {\n    target = idlUtils.implForWrapper(target._defaultView);\n  }\n\n  // _dispatch allows setting isTrusted\n  target._dispatch(event);\n};\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,QAAQ,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC3C,MAAMC,UAAU,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AACxD,MAAME,QAAQ,GAAGF,OAAO,CAAC,uBAAuB,CAAC;AACjD,MAAM;EAAEG;AAAW,CAAC,GAAGH,OAAO,CAAC,oBAAoB,CAAC;AACpD,MAAM;EAAEI;AAAQ,CAAC,GAAGJ,OAAO,CAAC,cAAc,CAAC;AAE3C,MAAMK,qBAAqB,GAAG,IAAIC,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;;AAEhF;AACA;AACA;AACA;AACAC,OAAO,CAACC,sBAAsB,GAAGC,MAAM,IAAI;EACzC,IAAI,CAACA,MAAM,CAACC,cAAc,CAACC,YAAY,IAAI,CAACF,MAAM,CAACE,YAAY,EAAE;IAC/D,OAAO,KAAK;EACd;EAEA,IAAIF,MAAM,CAACG,SAAS,KAAKb,QAAQ,CAACc,aAAa,EAAE;IAC/C,OAAO,IAAI;EACb;EAEA,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,QAAQ,CAACP,MAAM,CAACQ,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;IAC5D,OAAO,IAAI;EACb;EAEA,IAAIR,MAAM,CAACS,aAAa,KAAKd,OAAO,EAAE;IACpC,IAAIK,MAAM,CAACU,UAAU,KAAK,QAAQ,EAAE;MAClC,OAAO,IAAI;IACb;IAEA,IAAIV,MAAM,CAACU,UAAU,KAAK,GAAG,IAAIV,MAAM,CAACW,YAAY,CAAC,MAAM,CAAC,EAAE;MAC5D,OAAO,IAAI;IACb;IAEA,IAAIf,qBAAqB,CAACgB,GAAG,CAACZ,MAAM,CAACU,UAAU,CAAC,IAAI,CAAChB,UAAU,CAACM,MAAM,CAAC,EAAE;MACvE,IAAIA,MAAM,CAACU,UAAU,KAAK,OAAO,IAAIV,MAAM,CAACa,IAAI,KAAK,QAAQ,EAAE;QAC7D,OAAO,KAAK;MACd;MAEA,OAAO,IAAI;IACb;EACF;EAEA,OAAO,KAAK;AACd,CAAC;;AAED;AACA;AACAf,OAAO,CAACgB,kCAAkC,GAAG,CAACC,IAAI,EAAEC,MAAM,EAAEC,aAAa,KAAK;EAC5E,IAAID,MAAM,KAAK,IAAI,EAAE;IACnB;IACA;EACF;EAEA,MAAME,KAAK,GAAG1B,UAAU,CAAC2B,UAAU,CACjC,CACEJ,IAAI,EACJ;IACEK,OAAO,EAAE,KAAK;IACdC,UAAU,EAAE,KAAK;IACjBJ,aAAa;IACbK,IAAI,EAAEN,MAAM,CAACf,cAAc,CAACC,YAAY;IACxCqB,MAAM,EAAE;EACV,CAAC,CACF,EACD;IACEC,SAAS,EAAE;EACb,CACF,CAAC;EAED,IAAIR,MAAM,CAACd,YAAY,EAAE;IACvBc,MAAM,GAAGvB,QAAQ,CAACgC,cAAc,CAACT,MAAM,CAACd,YAAY,CAAC;EACvD;;EAEA;EACAc,MAAM,CAACU,SAAS,CAACR,KAAK,CAAC;AACzB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}