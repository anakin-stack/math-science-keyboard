{"ast":null,"code":"\"use strict\";\n\nconst whatwgURL = require(\"whatwg-url\");\nexports.documentBaseURL = document => {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#document-base-url\n\n  const firstBase = document.querySelector(\"base[href]\");\n  const fallbackBaseURL = exports.fallbackBaseURL(document);\n  if (firstBase === null) {\n    return fallbackBaseURL;\n  }\n  return frozenBaseURL(firstBase, fallbackBaseURL);\n};\nexports.documentBaseURLSerialized = document => {\n  return whatwgURL.serializeURL(exports.documentBaseURL(document));\n};\nexports.fallbackBaseURL = document => {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#fallback-base-url\n\n  // Unimplemented: <iframe srcdoc>\n\n  if (document.URL === \"about:blank\" && document._defaultView && document._defaultView._parent !== document._defaultView) {\n    return exports.documentBaseURL(document._defaultView._parent._document);\n  }\n  return document._URL;\n};\nexports.parseURLToResultingURLRecord = (url, document) => {\n  // https://html.spec.whatwg.org/#resolve-a-url\n\n  // Encoding stuff ignored; always UTF-8 for us, for now.\n\n  const baseURL = exports.documentBaseURL(document);\n  return whatwgURL.parseURL(url, {\n    baseURL\n  });\n  // This returns the resulting URL record; to get the resulting URL string, just serialize it.\n};\n\nfunction frozenBaseURL(baseElement, fallbackBaseURL) {\n  // https://html.spec.whatwg.org/multipage/semantics.html#frozen-base-url\n  // The spec is eager (setting the frozen base URL when things change); we are lazy (getting it when we need to)\n\n  const baseHrefAttribute = baseElement.getAttribute(\"href\");\n  const result = whatwgURL.parseURL(baseHrefAttribute, {\n    baseURL: fallbackBaseURL\n  });\n  return result === null ? fallbackBaseURL : result;\n}","map":{"version":3,"names":["whatwgURL","require","exports","documentBaseURL","document","firstBase","querySelector","fallbackBaseURL","frozenBaseURL","documentBaseURLSerialized","serializeURL","URL","_defaultView","_parent","_document","_URL","parseURLToResultingURLRecord","url","baseURL","parseURL","baseElement","baseHrefAttribute","getAttribute","result"],"sources":["G:/scientificKeyboard/keyboard/node_modules/mathjax-node/node_modules/jsdom/lib/jsdom/living/helpers/document-base-url.js"],"sourcesContent":["\"use strict\";\nconst whatwgURL = require(\"whatwg-url\");\n\nexports.documentBaseURL = document => {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#document-base-url\n\n  const firstBase = document.querySelector(\"base[href]\");\n  const fallbackBaseURL = exports.fallbackBaseURL(document);\n\n  if (firstBase === null) {\n    return fallbackBaseURL;\n  }\n\n  return frozenBaseURL(firstBase, fallbackBaseURL);\n};\n\nexports.documentBaseURLSerialized = document => {\n  return whatwgURL.serializeURL(exports.documentBaseURL(document));\n};\n\nexports.fallbackBaseURL = document => {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#fallback-base-url\n\n  // Unimplemented: <iframe srcdoc>\n\n  if (document.URL === \"about:blank\" && document._defaultView &&\n      document._defaultView._parent !== document._defaultView) {\n    return exports.documentBaseURL(document._defaultView._parent._document);\n  }\n\n  return document._URL;\n};\n\nexports.parseURLToResultingURLRecord = (url, document) => {\n  // https://html.spec.whatwg.org/#resolve-a-url\n\n  // Encoding stuff ignored; always UTF-8 for us, for now.\n\n  const baseURL = exports.documentBaseURL(document);\n\n  return whatwgURL.parseURL(url, { baseURL });\n  // This returns the resulting URL record; to get the resulting URL string, just serialize it.\n};\n\nfunction frozenBaseURL(baseElement, fallbackBaseURL) {\n  // https://html.spec.whatwg.org/multipage/semantics.html#frozen-base-url\n  // The spec is eager (setting the frozen base URL when things change); we are lazy (getting it when we need to)\n\n  const baseHrefAttribute = baseElement.getAttribute(\"href\");\n  const result = whatwgURL.parseURL(baseHrefAttribute, { baseURL: fallbackBaseURL });\n  return result === null ? fallbackBaseURL : result;\n}\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,SAAS,GAAGC,OAAO,CAAC,YAAY,CAAC;AAEvCC,OAAO,CAACC,eAAe,GAAGC,QAAQ,IAAI;EACpC;;EAEA,MAAMC,SAAS,GAAGD,QAAQ,CAACE,aAAa,CAAC,YAAY,CAAC;EACtD,MAAMC,eAAe,GAAGL,OAAO,CAACK,eAAe,CAACH,QAAQ,CAAC;EAEzD,IAAIC,SAAS,KAAK,IAAI,EAAE;IACtB,OAAOE,eAAe;EACxB;EAEA,OAAOC,aAAa,CAACH,SAAS,EAAEE,eAAe,CAAC;AAClD,CAAC;AAEDL,OAAO,CAACO,yBAAyB,GAAGL,QAAQ,IAAI;EAC9C,OAAOJ,SAAS,CAACU,YAAY,CAACR,OAAO,CAACC,eAAe,CAACC,QAAQ,CAAC,CAAC;AAClE,CAAC;AAEDF,OAAO,CAACK,eAAe,GAAGH,QAAQ,IAAI;EACpC;;EAEA;;EAEA,IAAIA,QAAQ,CAACO,GAAG,KAAK,aAAa,IAAIP,QAAQ,CAACQ,YAAY,IACvDR,QAAQ,CAACQ,YAAY,CAACC,OAAO,KAAKT,QAAQ,CAACQ,YAAY,EAAE;IAC3D,OAAOV,OAAO,CAACC,eAAe,CAACC,QAAQ,CAACQ,YAAY,CAACC,OAAO,CAACC,SAAS,CAAC;EACzE;EAEA,OAAOV,QAAQ,CAACW,IAAI;AACtB,CAAC;AAEDb,OAAO,CAACc,4BAA4B,GAAG,CAACC,GAAG,EAAEb,QAAQ,KAAK;EACxD;;EAEA;;EAEA,MAAMc,OAAO,GAAGhB,OAAO,CAACC,eAAe,CAACC,QAAQ,CAAC;EAEjD,OAAOJ,SAAS,CAACmB,QAAQ,CAACF,GAAG,EAAE;IAAEC;EAAQ,CAAC,CAAC;EAC3C;AACF,CAAC;;AAED,SAASV,aAAaA,CAACY,WAAW,EAAEb,eAAe,EAAE;EACnD;EACA;;EAEA,MAAMc,iBAAiB,GAAGD,WAAW,CAACE,YAAY,CAAC,MAAM,CAAC;EAC1D,MAAMC,MAAM,GAAGvB,SAAS,CAACmB,QAAQ,CAACE,iBAAiB,EAAE;IAAEH,OAAO,EAAEX;EAAgB,CAAC,CAAC;EAClF,OAAOgB,MAAM,KAAK,IAAI,GAAGhB,eAAe,GAAGgB,MAAM;AACnD"},"metadata":{},"sourceType":"script","externalDependencies":[]}